---
import Banner from "../components/Banner.astro";

const siteName = "PathForward Pharmacology";
const title = Astro.props.title || siteName;
const defaultDesc =
  "Pharmacology-led, analytics-powered consulting. Led by a senior pharmacologist (20+ years at Novartis) to accelerate R&D, medical affairs, and market access decisions.";
const currentPath = new URL(Astro.request.url).pathname.replace(/\/$/, "");

const navClasses = [
  "inline-block",
  "rounded-lg",
  "py-1",
  "px-3",
  "text-sm",
  "font-medium",
  "transition-all",
  "duration-300",
  "relative",
  "overflow-hidden",
  "group",
];
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" href="/favicon.ico?v=2" />
    <meta name="generator" content={Astro.generator} />
    <meta name="description" content={Astro.props.desc || defaultDesc} />
    <link rel="sitemap" href="/sitemap-index.xml" />

    <!-- Fonts (async) -->
    <link
      rel="preload"
      href="https://use.typekit.net/qim2dce.css"
      as="style"
      onload="this.onload=null;this.rel='stylesheet'"
    />
    <noscript>
      <link rel="stylesheet" href="https://use.typekit.net/qim2dce.css" />
    </noscript>

    <title>{title}</title>

    <!-- Open Graph -->
    <meta property="og:title" content={title} />
    <meta property="og:description" content={Astro.props.desc || defaultDesc} />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="/og-image.jpg" />
    <meta property="og:url" content={Astro.site ? new URL(Astro.request.url, Astro.site).toString() : Astro.request.url} />
    <meta name="twitter:card" content="summary_large_image" />
  </head>

  <body class="flex flex-col min-h-screen justify-between bg-white text-slate-900">
    <header class="py-6 sticky top-0 z-40 bg-white/80 backdrop-blur border-b border-slate-200">
      <div class="mx-auto w-full max-w-[90rem] px-6 sm:px-8 lg:px-10">
        <nav class="relative">
          <div class="flex items-center justify-between gap-6">
            <a href="/" class="flex items-center gap-4">
              <img
                alt="PathForward Pharmacology logo"
                src="/assets/pf_logo.png"
                class="h-12 w-auto"
              />
              <span class="hidden sm:inline text-xl font-semibold tracking-tight">
                {siteName}
              </span>
            </a>

            <!-- Desktop nav (About → Services → Outcomes → Leadership → Contact) -->
            <div class="hidden md:flex items-center gap-x-1 md:gap-x-8">
              <a
                class:list={[
                  ...navClasses,
                  currentPath === "/about"
                    ? "bg-gradient-to-r from-[#0ea5e9] to-[#22c55e] text-white"
                    : "text-slate-700 hover:text-white",
                ]}
                href="/about"
              >
                <span class="relative z-10">About</span>
                <span class="absolute inset-0 bg-gradient-to-r from-[#0ea5e9] to-[#22c55e] opacity-0 group-hover:opacity-100 transition-opacity duration-300"></span>
              </a>

              <a
                class:list={[
                  ...navClasses,
                  currentPath === "/services"
                    ? "bg-gradient-to-r from-[#0ea5e9] to-[#22c55e] text-white"
                    : "text-slate-700 hover:text-white",
                ]}
                href="/services"
              >
                <span class="relative z-10">Services</span>
                <span class="absolute inset-0 bg-gradient-to-r from-[#0ea5e9] to-[#22c55e] opacity-0 group-hover:opacity-100 transition-opacity duration-300"></span>
              </a>

              <a
                class:list={[
                  ...navClasses,
                  currentPath === "/outcomes"
                    ? "bg-gradient-to-r from-[#0ea5e9] to-[#22c55e] text-white"
                    : "text-slate-700 hover:text-white",
                ]}
                href="/outcomes"
              >
                <span class="relative z-10">Outcomes</span>
                <span class="absolute inset-0 bg-gradient-to-r from-[#0ea5e9] to-[#22c55e] opacity-0 group-hover:opacity-100 transition-opacity duration-300"></span>
              </a>

              <a
                class:list={[
                  ...navClasses,
                  currentPath === "/leadership"
                    ? "bg-gradient-to-r from-[#0ea5e9] to-[#22c55e] text-white"
                    : "text-slate-700 hover:text-white",
                ]}
                href="/leadership"
              >
                <span class="relative z-10">Leadership</span>
                <span class="absolute inset-0 bg-gradient-to-r from-[#0ea5e9] to-[#22c55e] opacity-0 group-hover:opacity-100 transition-opacity duration-300"></span>
              </a>

              <a
                class:list={[
                  ...navClasses,
                  currentPath === "/contact"
                    ? "bg-gradient-to-r from-[#0ea5e9] to-[#22c55e] text-white"
                    : "text-slate-700 hover:text-white",
                ]}
                href="/contact"
              >
                <span class="relative z-10">Contact</span>
                <span class="absolute inset-0 bg-gradient-to-r from-[#0ea5e9] to-[#22c55e] opacity-0 group-hover:opacity-100 transition-opacity duration-300"></span>
              </a>
            </div>

            <!-- Mobile hamburger -->
            <button class="block md:hidden p-2 rounded-lg border border-slate-300/70" id="hamburger" aria-label="Open menu" aria-expanded="false">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="w-6 h-6"
              >
                <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16" />
              </svg>
            </button>
          </div>

          <!-- Mobile foldout (About → Services → Outcomes → Leadership → Contact) -->
          <div
            id="hamburger-fold"
            class="hidden border-t mt-4 border-slate-200 pt-3 space-y-2"
          >
            <a class="block py-2 text-slate-700" href="/about">About</a>
            <a class="block py-2 text-slate-700" href="/services">Services</a>
            <a class="block py-2 text-slate-700" href="/outcomes">Outcomes</a>
            <a class="block py-2 text-slate-700" href="/leadership">Leadership</a>
            <a class="block py-2 text-slate-700" href="/contact">Contact</a>
          </div>
        </nav>
      </div>
    </header>

    <main class="mb-auto w-full">
      <slot />
    </main>

    <footer class="py-10 bg-slate-50 text-slate-900 border-t border-slate-200">
      <div class="mx-auto w-full max-w-[90rem] px-6 sm:px-8 lg:px-10">
        <div class="flex flex-col md:flex-row items-start md:items-center justify-between gap-6">
          <div class="space-y-1">
            <p class="font-semibold">{siteName}</p>
            <p class="text-sm text-slate-600">
              Pharmacology-led consulting for R&D, HEOR, and medical affairs.
            </p>
            <p class="text-sm text-slate-600">&copy; {new Date().getFullYear()} {siteName}</p>
          </div>

          <div class="flex items-center gap-x-5 md:gap-x-6">
            <!-- LinkedIn -->
            <a
              href="https://www.linkedin.com/in/huiqinwang/"
              rel="noopener noreferrer"
              target="_blank"
              aria-label="LinkedIn"
              class="text-slate-700 hover:text-slate-900"
            >
              <svg class="w-7 h-7" viewBox="0 0 448 512" fill="currentColor" aria-hidden="true">
                <path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/>
              </svg>
            </a>

            <!-- Email -->
            <a
              href="mailto:hqwangaa@hotmail.com"
              aria-label="Email"
              class="text-slate-700 hover:text-slate-900"
            >
              <svg class="w-7 h-7" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
                <path d="M2 6.5A2.5 2.5 0 0 1 4.5 4h15A2.5 2.5 0 0 1 22 6.5v11A2.5 2.5 0 0 1 19.5 20h-15A2.5 2.5 0 0 1 2 17.5v-11Zm2.5-.5a.5.5 0 0 0-.5.5v.217l8 4.8 8-4.8V6.5a.5.5 0 0 0-.5-.5h-15Zm15.5 3.283-7.578 4.546a1 1 0 0 1-1.044 0L4.8 9.783V17.5a.5.5 0 0 0 .5.5h15a.5.5 0 0 0 .5-.5V9.783Z"/>
              </svg>
            </a>
          </div>
        </div>
      </div>
    </footer>

    <script>
      const btn = document.querySelector("#hamburger");
      const fold = document.querySelector("#hamburger-fold");
      if (btn && fold) {
        btn.addEventListener("click", () => {
          const isHidden = fold.classList.toggle("hidden");
          btn.setAttribute("aria-expanded", String(!isHidden));
        });
      }
    </script>
  </body>
</html>

